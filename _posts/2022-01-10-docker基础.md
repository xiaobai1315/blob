[toc]

## 镜像管理



### 命令

-i ：交互模式

-t：终端模式

-d: 后台模式

-p : 端口映射

-v : 目录挂载

### 查看日志

docker logs -f nginx   

 **-f:** 让 **docker logs** 像使用 **tail -f** 一样来输出容器内部的标准输出。

### 查看所有镜像： 

docker images 

### 搜索镜像：

 docker search nginx 

### 拉取镜像： 

docker pull nginx:版本号  ，不指定版本号默认拉取最新的

### 导出： 

docker save nginx > nginx.tar  ,备份打包镜像，可以导到别的机器上使用

### 导入：

docker load  < nginx.tar 

### 删除镜像：

 docker rmi nginx:版本号   ，不指定版本号默认删除最新的

### 查看镜像创建历史日志： 

docker history nginx



## 容器管理

### 运行容器：

docker run -d --name nginx-test -p 8081:80 nginx

-d : 后台执行

--name： 指定容器名称

-p 8081:80 ： 将docker的端口映射到主机端口上

docker run -d --name docker-test -p 80:80 -v ${PWD}/nginx/html:/usr/share/nginx/html nginx

-v 挂载目录，将当前目录下的nginx/html挂载到Nginx镜像容器中的/usr/share/nginx/html nginx目录下

### 查看运行的容器：

docker ps  列出正在运行的容器

docker ps -a :显示所有的容器，包括未运行的

### 查看容器中运行的进程:  

docker top busybox

### 查看资源占用:  

docker stats busybox

### 启动容器:  

docker start 容器名

### 容器重启 

 docker restart 容器名

### 停止容器 ：

docker stop 容器名,支持“优雅退出”。先发送SIGTERM信号，在一段时间之后（10s）再发送SIGKILL信号。Docker内部的应用程序可以接收SIGTERM信号，然后做一些“退出前工作”，比如保存状态、处理当前请求等。

docker kill  容器名, 发送SIGKILL信号，应用程序直接退出。

### 删除容器:

docker rm busybox

强制删除容器:docker rm -f busybox

### 执行命令:

docker exec -it busybox ls

### 复制文件:

docker cp busybox:/etc/hosts hosts

### 查看容器日志:

docker logs -f busybox

### 查看容器/镜像的元信息:

docker inspect busybox

格式化输出:docker inspect -f '{{.Id}}' busybox

### 查看容器内文件结构:

docker diff busybox

### 进入容器： 

docker exec -it nginx-test /bin/bash



## 网络

### 创建网络

docker network create -d bridge test-net

**d**：参数指定 Docker 网络类型，有 bridge、overlay。

### 连接容器

运行容器并连接到新建的 test-net 网络:

docker run -itd --name test1 --network test-net ubuntu /bin/bash

docker run -itd --name test2 --network test-net ubuntu /bin/bash

容器test1和test2可以实现网络联通